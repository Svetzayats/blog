---
title: Today I learned about ref callbacks
date: 2024-11-21
tags:
    - react
---

import { Aside } from '@astrojs/starlight/components';

It escaped my attention, we can pass a callback function as a `ref` for an element in React,
not just an object (like from useRef).

```tsx
const scroller = (node: HTMLDivElement) => {
    if (!node) return;
    node.scrollIntoView({ behavior: "smooth" });
};

// somewhere in component
 <div ref={scroller} />
```

How it works:
- when the element is added to the DOM, React calls the `ref` callback with the DOM node as its
argument
- when the element is removed from the DOM, React calls the `ref` callback with `null`
- also the callback is invoked whenever a new callback is assigned (on each render if it is written
as a simple function)

<Aside title="Useful">
    - [Documentation](https://react.dev/reference/react-dom/components/common#ref-callback)
    - [Example of usage — scroll to last message in chat](https://x.com/mhdcode/status/1859581837569355850)
    - [Example of usage — list](https://react.dev/learn/manipulating-the-dom-with-refs#how-to-manage-a-list-of-refs-using-a-ref-callback)
</Aside>





